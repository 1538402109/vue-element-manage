(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{581:function(t,e,n){"use strict";n.r(e);var a=n(585),i={data:function(){return{isFullScreen:!1}},methods:{handleFullScreen:function(){if(this.isFullScreen){var t=document,e=t.exitFullscreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.msExitFullscreen;e&&e.call(t)}else{var n=document.documentElement,a=n.requestFullscreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullscreen;a?a.call(n):this.$message({type:"warning",message:"您的浏览器不支持全屏浏览，请升级或更换浏览器！"})}this.isFullScreen=!this.isFullScreen}}},s=(n(670),n(67)),o=Object(s.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("el-tooltip",{attrs:{effect:"dark",content:this.isFullScreen?"取消全屏":"全屏浏览",placement:"bottom"}},[e("i",{staticClass:"el-icon-rank",on:{click:this.handleFullScreen}})])},[],!1,null,"9ffdc776",null).exports,c=n(658),r=n(92),l=n(244),u=(n(246),{components:{FullScreen:o,ThemePicker:c.a},data:function(){return{isCollapse:!1,avatar:""}},created:function(){this.getAvatar()},methods:{toHome:function(){this.$router.push("/dashboard")},changeCollapse:function(){this.isCollapse=!this.isCollapse,a.a.$emit("collapse",this.isCollapse)},handleCommand:function(t){var e=this;"logout"===t&&this.$store.dispatch("logout").then(function(){Object(l.b)(),sessionStorage.clear(),e.$router.replace("/account/login")})},getAvatar:function(){var t=this;r.a.account.getUserInfo({username:sessionStorage.getItem("userId")}).then(function(e){t.avatar=e.data.userInfo.avatar})}}}),h=(n(671),Object(s.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("router-link",{staticClass:"header__logo",attrs:{to:"/"}},[n("svg-icon",{attrs:{"icon-name":"logo"}}),t._v(" "),n("span",[t._v("后台管理系统")])],1),t._v(" "),n("i",{staticClass:"header__collapse",class:t.isCollapse?"el-icon-s-fold":"el-icon-s-unfold",on:{click:t.changeCollapse}}),t._v(" "),n("div",{staticClass:"header__menu"},[n("full-screen"),t._v(" "),n("theme-picker"),t._v(" "),n("el-dropdown",{on:{command:t.handleCommand}},[n("img",{staticClass:"header__menu__portrait",attrs:{src:t.avatar,alt:""}}),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("router-link",{attrs:{to:"/mine"}},[n("el-dropdown-item",[t._v("个人中心")])],1),t._v(" "),n("el-dropdown-item",{attrs:{divided:"",command:"logout"}},[t._v("退出登录")])],1)],1)],1)],1)},[],!1,null,"b6bb50ca",null).exports),d={name:"MenuItem",props:{config:{required:!0,default:{}}}},f=(n(672),{components:{MenuItem:Object(s.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.config.children?n("el-submenu",{attrs:{index:t.config.path}},[n("template",{slot:"title"},[t.config.icon?n("svg-icon",{attrs:{"icon-name":t.config.icon,"icon-class":"menu-icon"}}):t._e(),t._v(" "),n("span",[t._v(t._s(t.config.title))])],1),t._v(" "),t._l(t.config.children,function(t){return n("menu-item",{key:t.path,attrs:{config:t}})})],2):n("el-menu-item",{attrs:{index:t.config.path}},[t.config.icon?n("svg-icon",{attrs:{"icon-name":t.config.icon,"icon-class":"menu-icon"}}):t._e(),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.config.title))])],1)},[],!1,null,"4d424ea4",null).exports},data:function(){return{isCollapse:!1,menuRouteMap:[],menuList:[]}},computed:{routeMap:function(){return this.$store.getters.routeMap},activePath:function(){var t=this.$route,e=t.meta,n=t.path;return e.activePath?e.activePath:n}},created:function(){var t=this;a.a.$on("collapse",function(e){t.isCollapse=e}),this.menuRouteMap=this.getMenuRouteMap(this.routeMap),this.menuList=this.getMenu(this.menuRouteMap)},methods:{getMenuRouteMap:function(t){var e=this;return t.filter(function(t){return!t.meta.hiddenInMenu&&(!t.children||(t.children=e.getMenuRouteMap(t.children),0!==t.children.length))})},getMenuItem:function(t){var e=this;return t.children&&1!==t.children.length?{title:t.meta.title,icon:t.meta.icon,path:t.path,children:t.children.map(function(t){return e.getMenuItem(t)})}:{title:t.meta.title,icon:t.meta.icon,path:t.path}},getMenu:function(t){var e=this;return this.menuRouteMap.map(function(t){return e.getMenuItem(t)})}}}),m=(n(673),Object(s.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("el-menu",{staticClass:"menu",attrs:{"default-active":this.activePath,collapse:this.isCollapse,"unique-opened":"",router:"","background-color":"#545c64","text-color":"#fff"}},this._l(this.menuList,function(t){return e("menu-item",{key:t.path,attrs:{config:t}})}),1)},[],!1,null,"4066cbef",null).exports),p={data:function(){return{tagList:[]}},watch:{$route:function(t){this.addTag(t)},tagList:function(){var t=this.tagList.map(function(t){if(t.name)return t.name});a.a.$emit("cachePage",t)}},created:function(){this.addTag(this.$route)},methods:{isTagActive:function(t){return this.$route.path==t},addTag:function(t){this.tagList.some(function(e){return e.path==t.path})||(this.tagList.length>=8&&this.tagList.shift(),this.tagList.push({title:t.meta.title,path:t.path,name:t.matched[1].components.default.name}))},closeTag:function(t){if(1==this.tagList.length&&"/dashboard"==this.tagList[0].path)return!1;var e=this.tagList.splice(t,1)[0],n=this.tagList[t]?this.tagList[t]:this.tagList[t-1];n?e.path==this.$route.path&&this.$router.push(n.path):this.$router.push("/dashboard")}}},g=(n(674),{components:{VHeader:h,VMenu:m,VTags:Object(s.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-tags"},t._l(t.tagList,function(e,a){return n("div",{key:e.path,staticClass:"layout-tags__item",class:{active:t.isTagActive(e.path)}},[n("router-link",{staticClass:"link",attrs:{to:e.path}},[t._v(t._s(e.title))]),t._v(" "),n("i",{staticClass:"el-icon-circle-close icon",on:{click:function(e){return t.closeTag(a)}}})],1)}),0)},[],!1,null,"0fa86d7e",null).exports},data:function(){return{isCollapse:!1,cachePages:[]}},created:function(){var t=this;a.a.$on("collapse",function(e){t.isCollapse=e}),a.a.$on("cachePage",function(e){t.cachePages=e})},methods:{}}),v=(n(675),Object(s.a)(g,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"inner-layout"},[e("v-header"),this._v(" "),e("v-menu"),this._v(" "),e("div",{staticClass:"container",class:{collapse:this.isCollapse}},[e("v-tags"),this._v(" "),e("div",{staticClass:"page"},[e("transition",{attrs:{name:"page",mode:"out-in"}},[e("keep-alive",{attrs:{include:this.cachePages}},[e("router-view")],1)],1)],1)],1)],1)},[],!1,null,"6bf6e3d6",null).exports);n.d(e,"default",function(){return v})},595:function(t,e,n){},596:function(t,e,n){},597:function(t,e,n){},598:function(t,e,n){},599:function(t,e,n){},600:function(t,e,n){},670:function(t,e,n){"use strict";var a=n(595);n.n(a).a},671:function(t,e,n){"use strict";var a=n(596);n.n(a).a},672:function(t,e,n){"use strict";var a=n(597);n.n(a).a},673:function(t,e,n){"use strict";var a=n(598);n.n(a).a},674:function(t,e,n){"use strict";var a=n(599);n.n(a).a},675:function(t,e,n){"use strict";var a=n(600);n.n(a).a}}]);