(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{699:function(e,n,t){},700:function(e,n,t){},847:function(e,n,t){"use strict";var a=t(699);t.n(a).a},848:function(e,n,t){"use strict";var a=t(700);t.n(a).a},866:function(e,n,t){"use strict";t.r(n);var a=t(260),i=t.n(a),l=t(608),o=t.n(l),r=t(611),c=t.n(r),s=t(693),d=function(e,n,t,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;return t*(e/=a)*Math.pow(e,i)+n},u=function(e){return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},f=function(e,n){e===window?(document.body.scrollTop=n,document.documentElement.scrollTop=n):e.scrollTop=n},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=Date.now(),l=u(e),o=n-l,r=function r(){var c=Date.now()-i,s=d(c,l,o,t);f(e,s),c<t?window.requestAnimationFrame(r):(f(e,n),a())};r()};o.a.GlobalWorkerOptions.workerSrc=c.a;var v={props:{sourceType:{validator:function(e){return["url","base64"].includes(e)}},url:{type:String,default:""},data:{type:String,default:""},scale:{type:String,default:"page-actual"},pagination:{type:Boolean,default:!0}},data:function(){return{fileLoading:!1,cmapUrl:"pdfjs-dist/cmaps/",cmapPacked:!0,searchText:"",totalPage:0,scaleMode:this.scale,pdfLinkService:null,pdfFindController:null,pdfViewer:null,scaleOptions:[{label:"自动缩放",value:"auto"},{label:"实际大小",value:"page-actual"},{label:"适合页面",value:"page-fit"},{label:"适合页宽",value:"page-width"},{label:"50%",value:"0.5"},{label:"75%",value:"0.75"},{label:"100%",value:"1"},{label:"125%",value:"1.25"},{label:"150%",value:"1.5"},{label:"200%",value:"2"},{label:"300%",value:"3"},{label:"400%",value:"4"}]}},watch:{searchText:function(e){this.handleSearch(e)}},mounted:function(){this.initPdf(),this.loadFile()},methods:{decodeBase64:function(e){var n="";if(e.indexOf(";base64,")>-1){var t=e.indexOf(";base64,")+";base64,".length;n=e.substring(t).replace(/[\r\n]/g,"")}else n=e.replace(/[\r\n]/g,"");return window.atob(n)},initPdf:function(){var e=this;this.pdfLinkService=new s.PDFLinkService,this.pdfFindController=new s.PDFFindController({linkService:this.pdfLinkService}),this.pdfViewer=new s.PDFViewer({container:this.$refs.container,linkService:this.pdfLinkService,findController:this.pdfFindController}),this.pdfLinkService.setViewer(this.pdfViewer),document.addEventListener("pagesinit",function(){e.pdfViewer.currentScaleValue=e.scaleMode})},loadFile:function(){var e=this;this.fileLoading=!0;var n={cMapUrl:this.cmapUrl,cMapPacked:this.cmapPacked};"url"===this.sourceType?n.url=this.url:"base64"===this.sourceType&&(n.data=this.decodeBase64(this.data)),o.a.getDocument(n).promise.then(function(n){e.totalPage=n.numPages,e.renderPage(n),e.fileLoading=!1}).catch(function(){e.$message.error("文件加载失败！"),e.fileLoading=!1})},renderPage:function(e){this.pdfViewer.setDocument(e),this.pdfLinkService.setDocument(e,null)},handleSearch:function(e){this.pdfFindController.executeCommand("find",{query:e})},handleChangeScale:function(e){this.pdfViewer.currentScaleValue=this.scaleMode},handlePaginaiton:function(e){var n=document.getElementById("pdfViewer").getElementsByClassName("page"),t=i()(n).find(function(n){return n.dataset.pageNumber===String(e)}).offsetTop;p(document.querySelector(".pdf__container"),t,500)}}},h=(t(716),t(847),t(51)),g={name:"PdfComponent",components:{Pdf:Object(h.a)(v,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"pdf"},[t("div",{staticClass:"pdf__toolbar"},[t("div",{staticClass:"left"},[t("el-select",{attrs:{size:"mini"},on:{change:e.handleChangeScale},model:{value:e.scaleMode,callback:function(n){e.scaleMode=n},expression:"scaleMode"}},e._l(e.scaleOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("div",{staticClass:" middle"}),e._v(" "),t("div",{staticClass:"right"},[t("el-pagination",{attrs:{layout:"prev, pager, next,jumper","page-size":1,total:e.totalPage,background:"",small:""},on:{"current-change":e.handlePaginaiton}})],1)]),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoading,expression:"fileLoading"}],ref:"container",staticClass:"pdf__container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"文件加载中"}},[t("div",{staticClass:"pdfViewer",attrs:{id:"pdfViewer"}})])])},[],!1,null,"479323d2",null).exports},data:function(){return{}}},m=(t(848),Object(h.a)(g,function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"pdf-component"},[n("pdf",{attrs:{sourceType:"url",url:"http://www.xdocin.com/xdoc?_key=fedii4dtyfhmvgryqyntfjavte&_func=down&_dir=pdfdemo.pdf"}})],1)},[],!1,null,"24c593f6",null).exports);t.d(n,"default",function(){return m})}}]);