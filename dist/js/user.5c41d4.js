(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1054:function(e,t,n){"use strict";n.r(t);var a=n(775);n.d(t,"default",function(){return a.a})},1098:function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),o=n(1174),i=n(1171),l=n(1175),u=n(1176),c=n(793),s=n(706),f=n(650),p=n(784),d=n(698),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var m={labelCol:{span:4},wrapperCol:{span:20}},y=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.state={detail:{name:"",age:"",gender:"",role:[]}},t.componentWillReceiveProps=function(e){t.props.editKey!==e.editKey&&t.getDetail(e.editKey)},t.handleCancel=function(e){t.props.onClose()},t.handleSubmit=function(n){n.preventDefault(),t.props.form.validateFields(function(n,a){n?e.warning("请按照正确格式填写信息！"):(t.props.editKey?e.success("修改成功"):e.success("新增成功"),t.props.onClose())})},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),h(n,[{key:"getDetail",value:function(e){var t=this;e&&Object(p.a)({id:e}).then(function(e){t.setState({detail:e.data.detail})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.detail;return r.a.createElement(o.a,{title:(this.props.editKey?"修改":"新增")+this.props.title,width:600,visible:this.props.editVisible,onCancel:this.handleCancel,footer:null,destroyOnClose:!0},r.a.createElement(i.a,Object.assign({layout:"horizontal",colon:!0,labelAlign:"left"},m,{onSubmit:this.handleSubmit}),r.a.createElement(i.a.Item,{label:"姓名"},e("name",{initialValue:t.name,rules:[{required:!0,message:"请输入用户姓名!"}]})(r.a.createElement(l.a,{placeholder:"请输入姓名"}))),r.a.createElement(i.a.Item,{label:"年龄"},e("age",{initialValue:t.age,rules:[{required:!0,message:"请输入用户年龄!"}]})(r.a.createElement(u.a,{placeholder:"请输入年龄",min:1,max:150}))),r.a.createElement(i.a.Item,{label:"性别"},e("gender",{initialValue:t.gender,rules:[{required:!0,message:"请选择用户性别!"}]})(r.a.createElement(c.a.Group,null,Object(d.b)(d.a.gender).map(function(e){return r.a.createElement(c.a,{key:e.value,value:e.value},e.label)})))),r.a.createElement(i.a.Item,{label:"角色"},e("role",{initialValue:t.role,rules:[{required:!0,message:"请至少选择一个用户角色!"}]})(r.a.createElement(s.a.Group,{options:Object(d.b)(d.a.role)}))),r.a.createElement(i.a.Item,{wrapperCol:{offset:8}},r.a.createElement(f.a,{type:"primary",onClick:this.handleCancel},"取消"),r.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{marginLeft:"20px"}},"保存"))))}}]),n}();t.a=i.a.create()(y)}).call(this,n(705).default)},1102:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1166),i=n(1167),l=n(650),u=n(1175),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.onAdd,n=e.onDelete,a=e.onSearch;return r.a.createElement(o.a,{type:"flex",justify:"space-between"},r.a.createElement(i.a,null,r.a.createElement(l.a.Group,null,r.a.createElement(l.a,{type:"primary",icon:"plus",onClick:function(){return t()}},"新增"),r.a.createElement(l.a,{type:"danger",icon:"minus",onClick:function(){return n()}},"删除"))),r.a.createElement(i.a,null,r.a.createElement(u.a.Search,{placeholder:"请输入查询关键字",onSearch:function(e){return a(e)},enterButton:!0})))}}]),t}();t.a=s},1164:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1169),i=function(e,t,n,a){var r=e;return(r/=a/2)<1?n/2*r*r+t:-n/2*(--r*(r-2)-1)+t},l=function(e,t){e===window?(document.body.scrollTop=t,document.documentElement.scrollTop=t):e.scrollTop=t},u=function(e){return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,a=arguments[3],r=u(e),o=t-r,c=20,s=0,f=function t(){var u=i(s+=c,r,o,n);l(e,u),s<n?window.requestAnimationFrame(t):a&&"function"==typeof a&&a()};f()},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.rowSelection={onChange:function(t,n){e.props.onSelectedRows(n)}},e.handleChange=function(t){e.props.onPaginationChange(t),c(document.getElementById("mainContent"),0)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.tableLoading,n=e.columns,a=e.dataSource,i=e.total;return r.a.createElement(o.a,{bordered:!0,size:"small",columns:n,dataSource:a,loading:t,rowSelection:this.rowSelection,onChange:this.handleChange,pagination:{total:i,defaultCurrent:1,defaultPageSize:10,pageSizeOptions:["10","20","30","50","100"],showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共"+e+"条数据"}}})}}]),t}();t.a=f},775:function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),o=n(650),i=n(1168),l=n(1174),u=n(1164),c=n(1098),s=n(1102),f=(n(582),n(784)),p=n(698),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var m=p.a.gender,y=p.a.role,b=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.state={tableData:[],tableLoading:!1,total:0,selectedRows:[],editVisible:!1,editKey:"",detail:{}},t.queryCondition={name:"",pageNum:1,pageSize:10},t.columns=[{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age",sorter:function(e,t){return e.age-t.age}},{title:"性别",dataIndex:"gender",key:"gender",filters:[{text:m[1],value:m[1]},{text:m[2],value:m[2]}],filterMultiple:!1,onFilter:function(e,t){return 0===t.gender.indexOf(e)}},{title:"角色",dataIndex:"role",key:"role"},{title:"注册时间",dataIndex:"time",key:"time",sorter:function(e,t){return Date.parse(e.time)-Date.parse(t.time)}},{title:"操作",key:"action",width:200,render:function(e,n){return r.a.createElement(o.a.Group,null,r.a.createElement(o.a,{type:"primary",onClick:function(){return t.handleEdit(n.key)}},"修改"),r.a.createElement(i.a,{title:"确认删除用户"+n.name+"?",onConfirm:function(){return t.handleDelete([n])},okText:"确认",cancelText:"取消"},r.a.createElement(o.a,{type:"danger"},"删除")))}}],t.getList=function(){t.setState({tableLoading:!0}),Object(f.b)(t.queryCondition).then(function(e){var n=e.data.list.map(function(e){return d({},e,{key:e.id,gender:m[e.gender],role:e.role.map(function(e){return y[e]}).join(",")})});t.setState({tableLoading:!1,tableData:n,total:e.data.total})})},t.handleSearch=function(e){t.queryCondition.name=e,t.getList()},t.handleEdit=function(e){t.setState({editVisible:!0,editKey:e||""})},t.handleDelete=function(n){if(n){n.map(function(e){return e.key});var a=n.map(function(e){return e.name}).join("，");e.success("成功删除用户“"+a+"”！")}else{var r=t.state.selectedRows;if(0===r.length)return void e.warning("请选择要删除的用户");r.map(function(e){return e.key});var o=r.map(function(e){return e.name}).join("，");l.a.confirm({title:"确认删除以下用户吗?",content:o,onOk:function(){e.success("成功删除用户“"+o+"”！")}})}},t.handleSelectedRows=function(e){t.setState({selectedRows:e})},t.handlePaginationChange=function(e){Object.assign(t.queryCondition,{pageNum:e.current,pageSize:e.pageSize}),t.getList()},t.handleClose=function(){t.setState({editVisible:!1})},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),h(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return r.a.createElement("div",{className:"curd-table"},r.a.createElement(s.a,{onAdd:this.handleEdit,onDelete:this.handleDelete,onSearch:this.handleSearch}),r.a.createElement(u.a,{columns:this.columns,dataSource:this.state.tableData,total:this.state.total,tableLoading:this.state.tableLoading,onSelectedRows:this.handleSelectedRows,onPaginationChange:this.handlePaginationChange}),r.a.createElement(c.a,{title:"用户信息",editVisible:this.state.editVisible,editKey:this.state.editKey,onClose:this.handleClose}))}}]),n}();t.a=b}).call(this,n(705).default)},784:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a=function(t){return e({url:"/user/userList",method:"post",data:t})},r=function(t){return e({url:"/user/userDetail",method:"post",data:t})}}).call(this,n(723).default)}}]);