(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{657:function(e,a,r){},790:function(e,a,r){"use strict";var t=r(657);r.n(t).a},853:function(e,a,r){"use strict";r.r(a);var t=r(121),s=r.n(t),n=r(180),l=r.n(n),o=r(71),i=r(181),u={name:"Mine",data:function(){return{tableMng:i.a,userInfo:{name:"",roles:"",gender:"",avatar:"",mobilePhone:"",email:""},rules:{name:[{required:!0,message:"请填写姓名",trigger:"blur"},{max:6,message:"姓名长度不能超过6个字",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],mobilePhone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^1[345789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],email:[{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},submitLoading:!1}},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;return l()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.account.getUserInfo({userId:sessionStorage.getItem("userId")});case 2:r=a.sent,e.userInfo=r.data.userInfo;case 4:case"end":return a.stop()}},a,e)}))()},beforeAvatarUpload:function(e){var a="image/jpeg"===e.type,r="image/png"===e.type,t=e.size/1024/1024<2;return a||r||this.$message.error("上传头像图片只能是jpg或png格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),(a||r)&&t},handleAvatarSuccess:function(e,a){this.userInfo.avatar=URL.createObjectURL(a.raw)},handleSubmit:function(){var e=this;this.submitLoading=!0,this.$refs.userInfo.validate(function(a){a&&e.$message.success("更新成功"),e.submitLoading=!1})}}},c=(r(790),r(70)),m=Object(c.a)(u,function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"mine"},[r("el-form",{ref:"userInfo",attrs:{model:e.userInfo,rules:e.rules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[r("el-input",{model:{value:e.userInfo.name,callback:function(a){e.$set(e.userInfo,"name",a)},expression:"userInfo.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色："}},[r("el-select",{attrs:{multiple:"",disabled:"",placeholder:"请选择用户角色"},model:{value:e.userInfo.roles,callback:function(a){e.$set(e.userInfo,"roles",a)},expression:"userInfo.roles"}},e._l(e.tableMng.getTable("role"),function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"性别：",prop:"gender"}},[r("el-radio-group",{model:{value:e.userInfo.gender,callback:function(a){e.$set(e.userInfo,"gender",a)},expression:"userInfo.gender"}},[r("el-radio",{attrs:{label:"男"}}),e._v(" "),r("el-radio",{attrs:{label:"女"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"头像："}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess}},[e.userInfo.avatar?r("img",{staticClass:"avatar",attrs:{src:e.userInfo.avatar}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),r("p",[e._v("点击上传")])])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"手机:",placeholder:"请填写手机号",prop:"mobilePhone"}},[r("el-input",{attrs:{clearable:""},model:{value:e.userInfo.mobilePhone,callback:function(a){e.$set(e.userInfo,"mobilePhone",a)},expression:"userInfo.mobilePhone"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"邮箱:",placeholder:"请填写邮箱地址",prop:"email"}},[r("el-input",{attrs:{clearable:""},model:{value:e.userInfo.email,callback:function(a){e.$set(e.userInfo,"email",a)},expression:"userInfo.email"}})],1)],1)],1)],1),e._v(" "),r("el-button",{attrs:{type:"primary",round:"",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)},[],!1,null,"0748a846",null).exports;r.d(a,"default",function(){return m})}}]);